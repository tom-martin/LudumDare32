var npcGeometry = new THREE.BoxGeometry( 1, 2, 1 );
var npcMaterial = new THREE.MeshLambertMaterial( {color: 0x00ff00} );

function Npc(scene) {
	var mesh = new THREE.Mesh( npcGeometry, npcMaterial );
	scene.add( mesh );
	this.position = new THREE.Vector3((Math.random()*500)-250, 0, (Math.random()*500)-250);
	this.nextPosition = new THREE.Vector3();
	var speed = 5-Math.random();

	var dir = new THREE.Vector3(0, 0, 0);
	this.update = function(player, tick) {
		this.nextPosition.copy(this.position);
		dir.x = player.position.x - this.position.x;
		dir.z = player.position.z - this.position.z;
		dir.normalize();
		this.nextPosition.x += dir.x * tick * speed;
		this.nextPosition.z += dir.z * tick * speed;
	}

	this.applyNextMove= function() {
		this.position.copy(this.nextPosition);
		mesh.position.copy(this.position);
		mesh.position.y += 1;
	}
}
